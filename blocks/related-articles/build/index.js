!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e){!function(){t.exports=this.wp.element}()},function(t,e,n){var r=n(9);t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}},function(t,e,n){var r=n(10);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(12),o=n(11);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var r=n(15),o=n(14),c=n(13);t.exports=function(t){return r(t)||o(t)||c()}},function(t,e,n){"use strict";n.r(e);var r=n(7),o=n.n(r),c=n(6),i=n.n(c),a=n(5),l=n.n(a),s=n(4),u=n.n(s),f=n(3),p=n.n(f),m=n(2),b=n.n(m),d=n(1),y=n.n(d),g=n(0),h=wp.i18n.__,v=wp.apiFetch,O=wp.editor,_=O.InspectorControls,j=O.RichText,w=wp.components,S=w.PanelBody,x=w.Placeholder,E=w.RangeControl,k=w.Spinner,A=w.ToggleControl,P=w.Toolbar,C=w.TreeSelect,L=wp.data.withSelect,T=wp.date,M=T.dateI18n,R=T.format,N=T.__experimentalGetSettings,D=wp.element,I=D.Component,q=D.Fragment,B=D.RawHTML,F=wp.url.addQueryArgs;var U=function(t){function e(){var t;return i()(this,e),(t=u()(this,p()(e).apply(this,arguments))).state={categoriesList:[],tagsList:[]},t}return b()(e,t),l()(e,[{key:"componentDidMount",value:function(){var t=this;this.isStillMounted=!0,this.fetchCategoriesRequest=v({path:F("/wp/v2/categories",{per_page:-1})}).then(function(e){t.isStillMounted&&t.setState({categoriesList:e})}).catch(function(){t.isStillMounted&&t.setState({categoriesList:[]})}),this.fetchTagsRequest=v({path:F("/wp/v2/tags",{per_page:-1})}).then(function(e){t.isStillMounted&&t.setState({tagsList:e})}).catch(function(){t.isStillMounted&&t.setState({tagsList:[]})})}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1}},{key:"render",value:function(){var t=this.props,e=t.attributes,n=t.setAttributes,r=t.latestPosts,o=this.state,c=o.categoriesList,i=o.tagsList,a=e.displayPostDate,l=e.categories,s=e.tags,u=e.columns,f=e.title,p=e.titleLevel,m=Object(g.createElement)(_,null,Object(g.createElement)(S,{title:h("Related Articles Settings")},Object(g.createElement)("p",null,"Title Level"),Object(g.createElement)(P,{controls:[1,2,3,4,5,6].map(function(t){return{icon:"heading",isActive:t===p,onClick:function(){return n({titleLevel:t})},subscript:String(t)}})}),Object(g.createElement)(E,{label:h("Columns"),value:u,onChange:function(t){return n({columns:t})},min:2,max:6}),Object(g.createElement)(C,{key:"query-controls-category-select",label:h("Category"),noOptionLabel:h("All"),tree:function(t){var e=function(t,e){return t.reduce(function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t},{})}(t,"parent");return function t(n){return n.map(function(n){var r=e[n.id];return y()({},n,{children:r&&r.length?t(r):[]})})}(e[0]||[])}(c),selectedId:l,onChange:function(t){return n({categories:""!==t?t:void 0})}}),Object(g.createElement)(C,{key:"query-controls-tag-select",label:h("Tag"),noOptionLabel:h("All"),tree:i,selectedId:s,onChange:function(t){return n({tags:""!==t?t:void 0})}}),Object(g.createElement)(A,{label:h("Display post date"),checked:a,onChange:function(){return n({displayPostDate:!a})}})));if(!(Array.isArray(r)&&r.length))return Object(g.createElement)(q,null,m,Object(g.createElement)(x,{icon:"admin-post",label:h("Related Articles")},Array.isArray(r)?h("No articles found."):Object(g.createElement)(k,null)));var b=N().formats.date,d="h"+p;return Object(g.createElement)(q,null,m,Object(g.createElement)("div",{className:"related-articles"},Object(g.createElement)(j,{identifier:"title",className:"related-articles__title",tagName:d,value:f,onChange:function(t){return n({title:t})},formattingControls:[]}),Object(g.createElement)("div",{className:"related-articles__items wp-block-columns has-".concat(u,"-columns")},Array.from({length:u}).map(function(t,e){var n=r[e];if(!n)return Object(g.createElement)("div",{className:"related-articles__item wp-block-column",key:e});var o=n.title.rendered.trim();return Object(g.createElement)("div",{className:"related-articles__item wp-block-column",key:e},Object(g.createElement)("img",{src:n.featured_media_data.source_url,alt:n.featured_media_data.alt_text}),a&&n.date_gmt&&Object(g.createElement)("time",{dateTime:R("c",n.date_gmt),className:"related-articles__post-date"},M(b,n.date_gmt)),Object(g.createElement)("p",{className:"related-articles__item__title"},o?Object(g.createElement)(B,null,o):h("(Untitled)")))}))))}}]),e}(I),G=L(function(t,e){var n=e.attributes,r=n.columns,o=n.categories,c=n.tags;return{latestPosts:(0,t("core").getEntityRecords)("postType","post",{categories:o,tags:c,order:"desc",orderby:"date",per_page:r})}})(U),H=wp.i18n.__,Q=wp.blocks.registerBlockType,W=wp.data,X=W.dispatch,z=W.select,J={slug:"starterx",title:H("StarterX Blocks")},K=z("core/blocks").getCategories().filter(function(t){return t.slug!==J.slug});X("core/blocks").setCategories([J].concat(o()(K))),Q("starterx/related-articles",{title:H("Related Articles"),icon:"admin-page",category:J.slug,keywords:[H("recent posts"),H("recent articles"),H("articles")],edit:G,save:function(){return null}})},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}}]);