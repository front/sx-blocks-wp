!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const{__:r}=wp.i18n,{dispatch:o,select:l}=wp.data,a={slug:"starterx",title:r("StarterX Blocks")};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=wp.i18n.__,d=wp.apiFetch,g=wp.editor,y=g.InspectorControls,b=g.RichText,w=wp.components,h=w.PanelBody,_=w.Placeholder,v=w.RangeControl,S=w.Spinner,O=w.ToggleControl,E=w.Toolbar,P=w.TreeSelect,j=wp.data.withSelect,k=wp.date,C=k.dateI18n,T=k.format,L=k.__experimentalGetSettings,x=wp.element,A=x.Component,M=x.Fragment,R=x.RawHTML,N=wp.url.addQueryArgs;function D(e){var t,n=(t="parent",e.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{}));return function e(t){return t.map(function(t){var r=n[t.id];return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){f(e,t,n[t])})}return e}({},t,{children:r&&r.length?e(r):[]})})}(n[0]||[])}var q=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=s(this,u(t).apply(this,arguments))).state={categoriesList:[],tagsList:[]},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,A),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.isStillMounted=!0,this.fetchCategoriesRequest=d({path:N("/wp/v2/categories",{per_page:-1})}).then(function(t){e.isStillMounted&&e.setState({categoriesList:t})}).catch(function(){e.isStillMounted&&e.setState({categoriesList:[]})}),this.fetchTagsRequest=d({path:N("/wp/v2/tags",{per_page:-1})}).then(function(t){e.isStillMounted&&e.setState({tagsList:t})}).catch(function(){e.isStillMounted&&e.setState({tagsList:[]})})}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=e.latestPosts,o=this.state,l=o.categoriesList,a=o.tagsList,i=t.displayPostDate,c=t.categories,s=t.tags,u=t.columns,p=t.title,f=t.titleLevel,d=wp.element.createElement(y,null,wp.element.createElement(h,{title:m("Related Articles Settings")},wp.element.createElement("p",null,"Title Level"),wp.element.createElement(E,{controls:[1,2,3,4,5,6].map(function(e){return{icon:"heading",isActive:e===f,onClick:function(){return n({titleLevel:e})},subscript:String(e)}})}),wp.element.createElement(v,{label:m("Columns"),value:u,onChange:function(e){return n({columns:e})},min:2,max:6}),wp.element.createElement(P,{key:"query-controls-category-select",label:m("Category"),noOptionLabel:m("All"),tree:D(l),selectedId:c,onChange:function(e){return n({categories:""!==e?e:void 0})}}),wp.element.createElement(P,{key:"query-controls-tag-select",label:m("Tag"),noOptionLabel:m("All"),tree:a,selectedId:s,onChange:function(e){return n({tags:""!==e?e:void 0})}}),wp.element.createElement(O,{label:m("Display post date"),checked:i,onChange:function(){return n({displayPostDate:!i})}})));if(!(Array.isArray(r)&&r.length))return wp.element.createElement(M,null,d,wp.element.createElement(_,{icon:"admin-post",label:m("Related Articles")},Array.isArray(r)?m("No articles found."):wp.element.createElement(S,null)));var g=L().formats.date,w="h"+f;return wp.element.createElement(M,null,d,wp.element.createElement("div",{className:"related-articles"},wp.element.createElement(b,{identifier:"title",className:"related-articles__title",tagName:w,value:p,onChange:function(e){return n({title:e})},formattingControls:[]}),wp.element.createElement("div",{className:"related-articles__items wp-block-columns has-".concat(u,"-columns")},r.map(function(e,t){var n=e.title.rendered.trim();return wp.element.createElement("div",{className:"related-articles__item wp-block-column",key:t},wp.element.createElement("img",{src:e.featured_media_data.source_url,alt:e.featured_media_data.alt_text}),i&&e.date_gmt&&wp.element.createElement("time",{dateTime:T("c",e.date_gmt),className:"related-articles__post-date"},C(g,e.date_gmt)),wp.element.createElement("p",{className:"related-articles__item__title"},n?wp.element.createElement(R,null,n):m("(Untitled)")))}))))}}])&&c(n.prototype,r),o&&c(n,o),t}(),I=j(function(e,t){var n=t.attributes,r=n.columns,o=n.categories,l=n.tags;return{latestPosts:(0,e("core").getEntityRecords)("postType","post",{categories:o,tags:l,order:"desc",orderby:"date",per_page:r})}})(q),B=(n(1),n(3),wp.i18n.__),F=wp.blocks.registerBlockType;(e=>{const t=l("core/blocks").getCategories().filter(t=>t.slug!==e.slug);o("core/blocks").setCategories([e,...t])})(a),F("starterx/related-articles",{title:B("Related Articles"),icon:"admin-page",category:a.slug,keywords:[B("recent posts"),B("recent articles"),B("articles")],edit:I,save:function(){return null}})},function(e,t){},,function(e,t){}]);
//# sourceMappingURL=index.js.map