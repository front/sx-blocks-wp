!function(e){var t={};function a(r){if(t[r])return t[r].exports;var l=t[r]={i:r,l:!1,exports:{}};return e[r].call(l.exports,l,l.exports,a),l.l=!0,l.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)a.d(r,l,function(t){return e[t]}.bind(null,l));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);const{__:r}=wp.i18n,{dispatch:l,select:n}=wp.data,s={slug:"starterx",title:r("StarterX Blocks")},{__:c}=wp.i18n,i=wp.apiFetch,{InspectorControls:o,RichText:u}=wp.editor,{PanelBody:d,Placeholder:p,RangeControl:m,Spinner:g,ToggleControl:h,Toolbar:f,TreeSelect:_}=wp.components,{withSelect:y}=wp.data,{dateI18n:b,format:R,__experimentalGetSettings:v}=wp.date,{Component:S,Fragment:E,RawHTML:w}=wp.element,{addQueryArgs:C}=wp.url;function L(e){const t=(a="parent",e.reduce(function(e,t){return(e[t[a]]=e[t[a]]||[]).push(t),e},{}));var a;const r=e=>e.map(e=>{const a=t[e.id];return{...e,children:a&&a.length?r(a):[]}});return r(t[0]||[])}const k=2,T=6;var x=y((e,t)=>{const{columns:a,categories:r,tags:l}=t.attributes,{getEntityRecords:n}=e("core");return{latestPosts:n("postType","post",{categories:r,tags:l,order:"desc",orderby:"date",per_page:a})}})(class extends S{constructor(){super(...arguments),this.state={categoriesList:[],tagsList:[]}}componentDidMount(){this.isStillMounted=!0,this.fetchCategoriesRequest=i({path:C("/wp/v2/categories",{per_page:-1})}).then(e=>{this.isStillMounted&&this.setState({categoriesList:e})}).catch(()=>{this.isStillMounted&&this.setState({categoriesList:[]})}),this.fetchTagsRequest=i({path:C("/wp/v2/tags",{per_page:-1})}).then(e=>{this.isStillMounted&&this.setState({tagsList:e})}).catch(()=>{this.isStillMounted&&this.setState({tagsList:[]})})}componentWillUnmount(){this.isStillMounted=!1}render(){const{attributes:e,setAttributes:t,latestPosts:a}=this.props,{categoriesList:r,tagsList:l}=this.state,{displayPostDate:n,categories:s,tags:i,columns:y,title:S,titleLevel:C}=e,x=React.createElement(o,null,React.createElement(d,{title:c("Related Articles Settings")},React.createElement("p",null,"Title Level"),React.createElement(f,{controls:[1,2,3,4,5,6].map(e=>({icon:"heading",isActive:e===C,onClick:()=>t({titleLevel:e}),subscript:String(e)}))}),React.createElement(m,{label:c("Columns"),value:y,onChange:e=>t({columns:e}),min:k,max:T}),React.createElement(_,{key:"query-controls-category-select",label:c("Category"),noOptionLabel:c("All"),tree:L(r),selectedId:s,onChange:e=>t({categories:""!==e?e:void 0})}),React.createElement(_,{key:"query-controls-tag-select",label:c("Tag"),noOptionLabel:c("All"),tree:l,selectedId:i,onChange:e=>t({tags:""!==e?e:void 0})}),React.createElement(h,{label:c("Display post date"),checked:n,onChange:()=>t({displayPostDate:!n})})));if(!Array.isArray(a)||!a.length)return React.createElement(E,null,x,React.createElement(p,{icon:"admin-post",label:c("Related Articles")},Array.isArray(a)?c("No articles found."):React.createElement(g,null)));const A=v().formats.date,M="h"+C;return React.createElement(E,null,x,React.createElement("div",{className:"related-articles"},React.createElement(u,{identifier:"title",className:"related-articles__title",tagName:M,value:S,onChange:e=>t({title:e}),formattingControls:[]}),React.createElement("div",{className:`related-articles__items wp-block-columns has-${y}-columns`},a.map((e,t)=>{const a=e.title.rendered.trim();return React.createElement("div",{className:"related-articles__item wp-block-column",key:t},React.createElement("img",{src:e.featured_media_data.source_url,alt:e.featured_media_data.alt_text}),n&&e.date_gmt&&React.createElement("time",{dateTime:R("c",e.date_gmt),className:"related-articles__post-date"},b(A,e.date_gmt)),React.createElement("p",{className:"related-articles__item__title"},a?React.createElement(w,null,a):c("(Untitled)")))}))))}});a(1),a(3);const{__:A}=wp.i18n,{registerBlockType:M}=wp.blocks;(e=>{const t=n("core/blocks").getCategories().filter(t=>t.slug!==e.slug);l("core/blocks").setCategories([e,...t])})(s),M("starterx/related-articles",{title:A("Related Articles"),icon:"admin-page",category:s.slug,keywords:[A("recent posts"),A("recent articles"),A("articles")],edit:x,save:()=>null})},function(e,t){},,function(e,t){}]);